/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(w){function N(e,i,d){if(e.find(".bbp-reply-form form").find("#bbp-template-notices").html(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media){e.find(".gif-media-search-dropdown").removeClass("open"),e.find("#whats-new-toolbar .toolbar-button").removeClass("active disable");var o=e.find("#whats-new-attachments .forums-attached-gif-container");o.length&&(o.addClass("closed"),o.find(".gif-image-container img").attr("src",""),o[0].style=""),e.find("#bbp_media_gif").length&&e.find("#bbp_media_gif").val(""),void 0!==i&&d&&(void 0!==bp.Nouveau.Media.dropzone_obj[i]&&(bp.Nouveau.Media.dropzone_obj[i].destroy(),bp.Nouveau.Media.dropzone_obj.splice(i,1),bp.Nouveau.Media.dropzone_media.splice(i,1)),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-video-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-video-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"))}}w("body").hasClass("reply-edit")||w(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),w(this).hasClass("submitting"))return!1;w(this).addClass("submitting");var i=!0,d=!0,o=w(e.target).find(".bbp-the-content").data("key"),a=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[o]&&(a=window.forums_medium_reply_editor[o]),(0<w(this).find("#bbp_media").length&&0<w(this).find("#bbp_document").length&&0<w(this).find("#bbp_video").length&&0<w(this).find("#bbp_media_gif").length&&""==w(this).find("#bbp_media").val()&&""==w(this).find("#bbp_document").val()&&""==w(this).find("#bbp_video").val()&&""==w(this).find("#bbp_media_gif").val()||0<w(this).find("#bbp_media").length&&0<w(this).find("#bbp_document").length&&0<w(this).find("#bbp_video").length&&w(this).find("#bbp_media_gif").length<=0&&""==w(this).find("#bbp_media").val()&&""==w(this).find("#bbp_video").val()&&""==w(this).find("#bbp_document").val()||0<w(this).find("#bbp_media_gif").length&&w(this).find("#bbp_media").length<=0&&w(this).find("#bbp_document").length<=0&&w(this).find("#bbp_video").length<=0&&""==w(this).find("#bbp_media_gif").val())&&(d=!1),a&&""===w(w.parseHTML(w(this).find("#bbp_reply_content").val())).text().trim()&&0==d?(w(this).find(".bbp-the-content").addClass("error"),i=!1):a||""!==w.trim(w(this).find("#bbp_reply_content").val())||0!=d?(a&&w(this).find(".bbp-the-content").removeClass("error"),w(this).find("#bbp_reply_content").removeClass("error")):(w(this).find("#bbp_reply_content").addClass("error"),i=!1),i?function(e,i,d,o){var a={action:e,nonce:i};w.each(d,function(e,i){"action"===i.name?a.bbp_reply_form_action=i.value:a[i.name]=i.value});var g=o.closest("#bbpress-forums");w.post(window.bbpReplyAjaxJS.bbp_ajaxurl,a,function(e){if(e.success){g.find(".bbp-reply-form form").removeClass("submitting");var i="";if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",w("#post-"+e.reply_id).parent("li").replaceWith(i);else{if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var d=null,o="1";if(w("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var a=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;d=w("#post-"+e.reply_parent).closest("li.depth-"+a),o=window.bbpReplyAjaxJS.threaded_reply_depth}else d=w("#post-"+e.reply_parent).parent("li"),o=parseInt(d.data("depth"))+1;var t="ul";g.find(".bb-single-reply-list").is("ol")&&(t="ol"),d.find(">"+t+".bbp-threaded-replies").length||d.append("<"+t+' class="bbp-threaded-replies"></'+t+">"),i='<li class="highlight depth-'+o+'" data-depth="'+o+'">'+e.content+"</li>",d.find(">"+t+".bbp-threaded-replies").append(i)}else if(e.current_page==e.total_pages)i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",g.find(".bb-single-reply-list").append(i);else{var n=e.redirect_url,p=n.substring(0,n.indexOf("#"));window.location.href=p}jQuery(window).scroll()}if(""!==e.tags){var r=w("body .item-tags"),s=w("body .item-tags ul");"none"===r.css("display")?(r.append(e.tags),r.show()):(s.remove(),r.append(e.tags))}""!=i&&(w("body").animate({scrollTop:w(i).offset().top},500),setTimeout(function(){w(i).removeClass("highlight")},2e3));var l=g.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),b=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[l]&&bp.Nouveau.Media.dropzone_media[l].length){b=!0;for(var f=0;f<bp.Nouveau.Media.dropzone_media[l].length;f++)bp.Nouveau.Media.dropzone_media[l][f].saved=!0}var m=g.find(".bbp-reply-form form").find("#forums-post-document-uploader").data("key"),u=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[m]&&bp.Nouveau.Media.dropzone_media[m].length){u=!0;for(f=0;f<bp.Nouveau.Media.dropzone_media[m].length;f++)bp.Nouveau.Media.dropzone_media[m][f].saved=!0}var v=g.find(".bbp-reply-form form").find("#forums-post-video-uploader").data("key"),_=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[v]&&bp.Nouveau.Media.dropzone_media[v].length){_=!0;for(f=0;f<bp.Nouveau.Media.dropzone_media[v].length;f++)bp.Nouveau.Media.dropzone_media[v][f].saved=!0}var h=g.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[h]&&(window.forums_medium_reply_editor[h].execAction("selectAll"),window.forums_medium_reply_editor[h].execAction("removeFormate"),window.forums_medium_reply_editor[h].resetContent()),g.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),g.find("#bbp-close-btn").trigger("click"),g.find("#bbp_reply_content").val(""),N(g,l,b),N(g,m,u),N(g,v,_);var c=g.find(".scrubberpost");for(var y in c)if(w(c[y]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(y,10)+1,"");break}}else void 0!==e.content&&g.find(".bbp-reply-form form").find("#bbp-template-notices").html(e.content);g.find(".bbp-reply-form form").removeClass("submitting")})}("reply",window.bbpReplyAjaxJS.reply_nonce,w(this).serializeArray(),w(this)):w(this).removeClass("submitting")})});